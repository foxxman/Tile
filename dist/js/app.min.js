(()=>{"use strict";const e=(e,t)=>{t.forEach(((t,o)=>{o===e?t.classList.remove("hidden"):t.classList.add("hidden")}))},t=(e,t)=>{e.querySelectorAll(".divide-menu-item__link").forEach(((e,o)=>{o+1>t&&e.classList.add("hidden")}))},o=e=>{e.classList.toggle("active")},i=e=>{e.from.addEventListener("click",(t=>{console.log(e.from),t.preventDefault(),window.scroll({left:0,top:e.to.offsetTop,behavior:"smooth"})}))};var n,s;$(document).ready((function(){(new WOW).init()})),n=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(s=new Image).onload=s.onerror=function(){n(2==s.height)},s.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";const r=document.getElementById("call-request"),l=document.getElementById("call-form");r&&l&&i({from:r,to:l});const a=document.querySelector("#map-block"),c=document.querySelector("#ref-to-map");c&&a&&i({from:c,to:a}),new LazyLoad({selector:"img"}),$("img.img-svg").each((function(){var e=$(this),t=e.attr("class"),o=e.attr("src");$.get(o,(function(o){var i=$(o).find("svg");void 0!==t&&(i=i.attr("class",t+" replaced-svg")),!(i=i.removeAttr("xmlns:a")).attr("viewBox")&&i.attr("height")&&i.attr("width")&&i.attr("viewBox","0 0 "+i.attr("height")+" "+i.attr("width")),e.replaceWith(i)}),"xml")})),(()=>{const e=document.querySelectorAll(".header .open-menu"),t=document.querySelector(".sidebar-menu"),o=document.querySelector(".sidebar-menu__close");e.forEach((e=>{e.addEventListener("click",(()=>{console.log(t),t.classList.remove("hidden")}))})),o.addEventListener("click",(()=>{t.classList.add("hidden")})),t.querySelectorAll(".sidebar-menu__list").forEach((e=>(e=>{e.addEventListener("click",(e=>{const{target:t}=e,o=t.closest(".sidebar-menu__link_toggle");o&&(e.preventDefault(),o.parentNode.querySelector(".sidebar-menu__inner").classList.toggle("hidden"))}))})(e)))})(),document.querySelectorAll(".divide-menu-item").forEach((e=>{const o=e.dataset.showItems;((e,t)=>{if(e.querySelectorAll(".divide-menu-item__link").length>t){let t=document.createElement("button");t.classList.add("divide-menu-item__btn"),t.textContent="Ещё",e.append(t)}})(e,o),t(e,o),(e=>{const o=e.querySelector(".divide-menu-item__btn"),i=e.querySelectorAll(".divide-menu-item__link");let n=e.querySelector(".hidden");o&&o.addEventListener("click",(()=>{o.classList.toggle("rotate-arrow"),n?(i.forEach((e=>e.classList.remove("hidden"))),n=!1,o.textContent="Свернуть"):(n=!0,t(e,e.dataset.showItems),o.textContent="Еще")}))})(e)})),(()=>{const e=document.querySelector(".header-menuline__search-input");if(e){const t=e.parentNode.querySelector(".header-menuline__search-window");e.oninput=function(){((e,t)=>{e.value?t.classList.remove("hidden"):t.classList.add("hidden")})(e,t)}}})(),(()=>{const e=document.querySelector(".header-mobile"),t=e.querySelector(".search-activate"),o=e.querySelector(".header-menuline__search-window");t.addEventListener("click",(()=>{console.log(o),o.classList.toggle("hidden")}))})(),new Swiper(".swiper",{loop:!0,navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},pagination:{el:".swiper-pagination",clickable:!0},spaceBetween:30,autoplay:{delay:4e3,disableOnIteration:!0}}),new Swiper(".slider-1",{slidesPerView:2,spaceBetween:10,loop:!0,navigation:{nextEl:".view-next",prevEl:".view-prev"},pagination:{el:".view-pagination",clickable:!0},breakpoints:{500:{slidesPerView:3,spaceBetween:20},800:{slidesPerView:4,spaceBetween:30}},autoplay:{delay:4e3,disableOnIteration:!0}}),new Swiper(".slider-2",{slidesPerView:1,spaceBetween:10,allowTouchMove:!1,loop:!0,navigation:{nextEl:".view-next",prevEl:".view-prev"},pagination:{el:".view-pagination",clickable:!0},breakpoints:{}}),(()=>{const e=new Swiper(".slider__thumbs .swiper-container",{direction:"vertical",slidesPerView:3,spaceBetween:10,navigation:{nextEl:".slider__next",prevEl:".slider__prev"},breakpoints:{0:{direction:"horizontal"},768:{direction:"vertical"}}});new Swiper(".slider__images .swiper-container",{direction:"vertical",slidesPerView:1,spaceBetween:32,mousewheel:!0,navigation:{nextEl:".slider__next",prevEl:".slider__prev"},grabCursor:!0,thumbs:{swiper:e},breakpoints:{0:{direction:"horizontal"},768:{direction:"vertical"}}})})(),function(){function e(e){console.log("productsTable"),this.element=e,this.table=this.element.children(".cd-products-table"),this.tableHeight=this.table.height(),this.productsWrapper=this.table.children(".cd-products-wrapper"),this.tableColumns=this.productsWrapper.children(".cd-products-columns"),this.products=this.tableColumns.children(".product"),this.productsNumber=this.products.length,this.productWidth=this.products.eq(0).width(),this.productsTopInfo=this.table.find(".top-info"),this.featuresTopInfo=this.table.children(".features").children(".top-info"),this.topInfoHeight=this.featuresTopInfo.innerHeight()+30,this.leftScrolling=!1,this.filterBtn=this.element.find(".filter"),this.resetBtn=this.element.find(".reset"),this.filtering=!1,this.selectedproductsNumber=0,this.filterActive=!1,this.navigation=this.table.children(".cd-table-navigation"),this.bindEvents()}e.prototype.bindEvents=function(){console.log("bindEvents");var e=this;e.productsWrapper.on("scroll",(function(){e.leftScrolling||(e.leftScrolling=!0,window.requestAnimationFrame?window.requestAnimationFrame((function(){e.updateLeftScrolling()})):setTimeout((function(){e.updateLeftScrolling()}),250))})),this.navigation.on("click","a",(function(t){t.preventDefault(),e.updateSlider($(t.target).hasClass("next"))}))},e.prototype.upadteFilterBtn=function(){console.log("upadteFilterBtn"),this.selectedproductsNumber>=2?(this.filterActive=!0,this.filterBtn.addClass("active")):(this.filterActive=!1,this.filterBtn.removeClass("active"))},e.prototype.updateLeftScrolling=function(){console.log("updateLeftScrolling"),parseInt(this.tableColumns.eq(0).outerWidth(!0)),parseInt(this.element.width());var e=this.productsWrapper.scrollLeft();e>0?this.table.addClass("scrolling"):this.table.removeClass("scrolling"),this.table.hasClass("top-fixed")&&"desktop"==n()&&(s(this.productsTopInfo),s(this.featuresTopInfo)),this.leftScrolling=!1,this.updateNavigationVisibility(e)},e.prototype.updateNavigationVisibility=function(e){e>0?this.navigation.find(".prev").removeClass("inactive"):this.navigation.find(".prev").addClass("inactive"),e<this.tableColumns.outerWidth(!0)-this.productsWrapper.width()&&this.tableColumns.outerWidth(!0)>this.productsWrapper.width()?this.navigation.find(".next").removeClass("inactive"):this.navigation.find(".next").addClass("inactive")},e.prototype.updateTopScrolling=function(e){var t=this.table.offset().top;this.productsWrapper.scrollLeft(),t<=e&&t+this.tableHeight-this.topInfoHeight>=e||(t<=e?(this.table.removeClass("top-fixed").addClass("top-scrolling"),"desktop"==n()&&(this.productsTopInfo.css("top",this.tableHeight-this.topInfoHeight+"px"),this.navigation.find("a").css("top",this.tableHeight-this.topInfoHeight+"px"))):(this.table.removeClass("top-fixed top-scrolling"),this.productsTopInfo.attr("style",""),this.navigation.find("a").attr("style",""))),this.updateLeftScrolling()},e.prototype.updateProperties=function(){console.log("updateProperties"),this.tableHeight=this.table.height(),this.productWidth=this.products.eq(0).width(),this.topInfoHeight=this.featuresTopInfo.innerHeight()+30,this.tableColumns.css("width",this.productWidth*this.productsNumber+"px")},e.prototype.showSelection=function(){console.log("showSelection"),this.element.addClass("filtering"),this.filterProducts()},e.prototype.resetSelection=function(){console.log("resetSelection"),this.tableColumns.css("width",this.productWidth*this.productsNumber+"px"),this.element.removeClass("no-product-transition"),this.resetProductsVisibility()},e.prototype.filterProducts=function(){console.log("filterProducts");var e=this,t=(e.tableColumns.offset().left,e.productsWrapper.scrollLeft(),this.products.filter(".selected")),o=t.length;t.each((function(i){var n=$(this);e.productWidth,n.offset().left;s(),i==o-1&&n.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){setTimeout((function(){e.element.addClass("no-product-transition")}),50),setTimeout((function(){e.element.addClass("filtered"),e.productsWrapper.scrollLeft(0),e.tableColumns.css("width",e.productWidth*o+"px"),t.attr("style",""),n.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),e.updateNavigationVisibility(0)}),100)}))})),$(".no-csstransitions").length>0&&(e.element.addClass("filtered"),e.productsWrapper.scrollLeft(0),e.tableColumns.css("width",e.productWidth*o+"px"),t.attr("style",""),e.updateNavigationVisibility(0))},e.prototype.resetProductsVisibility=function(){console.log("resetProductsVisibility");var e=this,t=(e.tableColumns.offset().left,this.products.filter(".selected"));t.length,e.productsWrapper.scrollLeft();e.element.addClass("no-product-transition").removeClass("filtered"),e.products.each((function(t){var o=$(this);o.hasClass("selected")&&s(0,(1,e.productWidth))})),setTimeout((function(){e.element.removeClass("no-product-transition filtering"),s(),t.removeClass("selected").attr("style","")}),50)},e.prototype.updateSlider=function(e){var t=this.productsWrapper.scrollLeft();(t=e?t+this.productWidth:t-this.productWidth)<0&&(t=0),t>this.tableColumns.outerWidth(!0)-this.productsWrapper.width()&&(t=this.tableColumns.outerWidth(!0)-this.productsWrapper.width()),this.productsWrapper.animate({scrollLeft:t},200)};var t=[];$(".cd-products-comparison-table").each((function(){console.log($(this)),t.push(new e($(this)))}));var o=!1;function i(){console.log("checkResize"),t.forEach((function(e){e.updateProperties()})),o=!1}function n(){return console.log("checkMQ"),window.getComputedStyle(t[0].element.get(0),"::after").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function s(e,t){console.log("setTranformX")}$(window).on("resize",(function(){console.log("$(window).on('resize'"),o||(o=!0,window.requestAnimationFrame?window.requestAnimationFrame(i):setTimeout(i,250))}))}(),0!==document.querySelectorAll(".review-slider__changer").length&&(console.log(!0),document.querySelectorAll(".review-slider__changer").forEach((e=>e.addEventListener("click",(({target:t})=>{t.closest("button").classList.contains("review-slider__changer-active")||(e.querySelectorAll("button").forEach((e=>e.classList.toggle("review-slider__changer-active"))),e.closest(".review__content").querySelectorAll(".review-slider").forEach((e=>e.classList.toggle("review-slider-hidden"))))})))),(()=>{let t=0;const o=document.querySelector(".review");if(o){const i=o.querySelectorAll(".review__track .review__content"),n=o.querySelector(".review__changer .review__changer-previous"),s=o.querySelector(".review__changer .review__changer-next");e(t,i),s.addEventListener("click",(()=>{++t===i.length&&(t=0),e(t,i)})),n.addEventListener("click",(()=>{--t<0&&(t=i.length-1),e(t,i)}))}})()),document.querySelectorAll(".items-track").forEach((e=>{e.addEventListener("click",(({target:t})=>{const o=t.closest(".sale-img-btn");if(o){let t=0;e.querySelectorAll(".sale-img-btn").forEach(((i,n)=>{i===o&&(t=n),e.closest(".catalog__block__sale-images").querySelectorAll(".image-item").forEach(((e,o)=>{o===t?e.classList.remove("hidden"):e.classList.add("hidden")}))}))}}))})),document.querySelectorAll(".drops-block").forEach((e=>{(e=>{const t=e.querySelector(".catalog__dropdown"),o=e.querySelectorAll(".catalog__block__sales-list");((e,t,o)=>{e.forEach(((e,t)=>{0===t?e.classList.add("catalog__dropdown-active"):e.classList.remove("catalog__dropdown-active")})),t.forEach((t=>{t.dataset.list===e[0].dataset.list?t.classList.remove("hidden"):t.classList.add("hidden")}))})(t.querySelectorAll("button"),o),t.addEventListener("click",(({target:e})=>{const i=e.closest("button");if(i){const e=i.dataset.list;t.querySelectorAll("button").forEach((e=>{e===i?e.classList.add("catalog__dropdown-active"):e.classList.remove("catalog__dropdown-active")})),o.forEach((t=>{t.dataset.list===e?t.classList.remove("hidden"):t.classList.add("hidden")}))}}))})(e)})),(()=>{const e=document.querySelectorAll(".collapses");console.log(e),e.forEach((e=>{(e=>{const t=e.querySelector(".collapse-btn"),o=e.querySelector(".collapse-block");o.querySelector(".collapse-limiting"),o.classList.contains("collapse")?t.innerHTML="Развернуть":t.innerHTML="Свернуть",t.addEventListener("click",(()=>((e,t,o)=>{e.classList.contains("collapse")?t.innerHTML="Свернуть":t.innerHTML="Развернуть",e.classList.toggle("collapse"),t.classList.toggle("collapsed")})(o,t)))})(e)}))})(),document.querySelectorAll(".product-cost__number").forEach((e=>(e=>{if(e){const t=e.querySelector("input"),o=e.querySelector(".product-cost__number-more"),i=e.querySelector(".product-cost__number-less");t.value=1,o.addEventListener("click",(()=>{const e=Number(t.value);t.value=e+1})),i.addEventListener("click",(()=>{const e=Number(t.value);t.value=e-1,Number(t.value)<0&&(t.value=0)}))}})(e))),document.querySelectorAll(".magnify-wrapper").forEach((e=>{var t;(t=e).addEventListener("mousemove",(function(e){const o=t.querySelector("img"),i=t.querySelector(".large-img").style,n=e.clientX-o.getBoundingClientRect().left,s=e.clientY-o.getBoundingClientRect().top,r=o.width,l=o.height;let a=n/r*100,c=s/l*100;i.background=` url('${o.src}') no-repeat`,i.backgroundSize="600% 600%",n>.01*r&&(a+=.15*a),s>=.01*l&&(c+=.15*c),i.backgroundPositionX=a-9+"%",i.backgroundPositionY=c-9+"%",i.left=n-90+"px",i.top=s-90+"px"}),!1)})),document.querySelectorAll("[data-zoom-slider]").forEach((e=>(e=>{const t=e.querySelector("[data-zoom-content]").querySelectorAll("[data-zoom-order]");e.querySelector("[data-zoom-list]").addEventListener("click",(({target:e})=>{const o=e.closest("[data-zoom-order]");if(o){const e=o.dataset.zoomOrder;t.forEach((t=>{t.dataset.zoomOrder===e?t.classList.remove("hidden"):t.classList.add("hidden")}))}}))})(e))),document.querySelectorAll(".accordion").forEach((e=>{var t;(t=e).querySelector(".accordion-btn").addEventListener("click",(()=>{t.classList.toggle("active")}))})),document.querySelectorAll(".favourite-buttons").forEach((e=>e.addEventListener("click",(({target:e})=>{const t=e.closest(".favourite-button");t&&t.classList.contains("favourite-button__like")||t&&t.classList.contains("favourite-button__scales")?(e=>{o(e)})(t):t&&t.classList.contains("favourite-button__cross")?(e=>{console.log(e)})(t):t&&t.classList.contains("favourite-button__check")&&(e=>{o(e)})(t)})))),(()=>{var e,t=$(".ymap-container").children(".loader"),o=!1;function i(){e=new ymaps.Map("map-yandex",{center:[55.90287306881785,37.41408599999999],zoom:13,controls:["routePanelControl"]},{searchControlProvider:"yandex#search"});var o=new ymaps.Placemark(e.getCenter(),{balloonContent:"Мы здесь!"},{iconLayout:"default#image",iconImageHref:"../img/map-logo.png",iconImageSize:[42,42],iconImageOffset:[-55,-38]}),i=new ymaps.Placemark([55.91245471033023,37.39330792969248],{},{iconLayout:"default#image",iconImageHref:"../img/obi-logo.svg",iconImageSize:[42,42],iconImageOffset:[0,0]}),n=new ymaps.Placemark([55.90320927535217,37.416176421243684],{},{iconLayout:"default#image",iconImageHref:"../img/leroy-logo.svg",iconImageSize:[42,42],iconImageOffset:[0,0]}),s=e.controls.get("routePanelControl");s.routePanel.state.set({type:"masstransit",fromEnabled:!0,toEnabled:!1,to:"Химки, ул. 9 Мая, дом 12-Д стр.2"}),s.routePanel.options.set({allowSwitch:!1,reverseGeocoding:!0,types:{masstransit:!0,pedestrian:!0,taxi:!0}});var r,l=new ymaps.control.Button({data:{content:"Поменять местами",title:"Поменять точки местами"},options:{selectOnClick:!1,maxWidth:160}});l.events.add("click",(function(){s.routePanel.switchPoints()})),e.controls.add(l),e.geoObjects.add(o).add(i).add(n),(r=e.layers.get(0).get(0),new ymaps.vow.Promise((function(e,t){var o=function(e){for(var t in e)if(e.hasOwnProperty(t)&&(e[t]instanceof ymaps.layer.tileContainer.CanvasContainer||e[t]instanceof ymaps.layer.tileContainer.DomContainer))return e[t];return null}(r),i=!0;o.tiles.each((function(e,t){e.isReady()||(i=!1)})),i?e():o.events.once("ready",(function(){e()}))}))).then((function(){t.removeClass("is-active")}))}$((function(){$(".ymap-container").mouseenter((function(){o||(o=!0,t.addClass("is-active"),ymaps.load(i))}))}))})(),$(".img-comp-block").each((function(){$(this).twentytwenty({default_offset_pct:.5,orientation:"horizontal",before_label:"Проект",after_label:"Реализация",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1})}))})();